<main>
    <div class="firstRow">
        <section>
            <article>
                <p class="title">Crear / Modificar fichaje</p>
                <div class="content">
                    <div class="two-columns">
                        <table mat-table [dataSource]="employees">
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef> Nombre </th>
                                <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                            </ng-container>

                            <ng-container matColumnDef="role">
                                <th mat-header-cell *matHeaderCellDef> Rol </th>
                                <td mat-cell *matCellDef="let element"> {{element.role}} </td>
                            </ng-container>

                            <ng-container matColumnDef="show" stickyEnd>
                                <th mat-header-cell *matHeaderCellDef hidden> </th>
                                <td mat-cell *matCellDef="let element" hidden></td>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedEmployeesColumns; sticky: true;"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedEmployeesColumns;"></tr>
                        </table>

                        <form [formGroup]="form">
                            <input type="text" formControlName="id" hidden> <!-- Hidden input to store the id of the user -->
                            <mat-form-field>
                              <mat-label>Dia</mat-label>
                              <input type="text" matInput placeholder="Dia" formControlName="day" required>
                            </mat-form-field>
                            <mat-form-field>
                              <mat-label>Hora</mat-label>
                              <input type="text" matInput placeholder="Hour" formControlName="hour" required>
                            </mat-form-field>
                            <div class="buttons-group">
                              <button type="submit">Crear fichaje</button>
                            </div>
                          </form>
                    </div>
                </div>
            </article>
        </section>
        <section>
            <article>
                <p class="title">Empleados</p>
                <div class="content">
                    <table mat-table [dataSource]="employees">

                        <!-- ['name', 'role', 'show'] -->

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Nombre </th>
                            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                        </ng-container>

                        <ng-container matColumnDef="role">
                            <th mat-header-cell *matHeaderCellDef> Rol </th>
                            <td mat-cell *matCellDef="let element"> {{element.role}} </td>
                        </ng-container>

                        <ng-container matColumnDef="show" stickyEnd>
                            <th mat-header-cell *matHeaderCellDef> Acciones </th>
                            <td mat-cell *matCellDef="let element"> <button>Ver fichajes</button> </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedEmployeesColumns; sticky: true;"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedEmployeesColumns;"></tr>
                    </table>
                </div>
            </article>
        </section>
    </div>
    <div class="secondRow">
        <section>
            <article>
                <p class="title">Fichajes</p>
                <div class="content">
                    <table mat-table [dataSource]="checkins">

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Nombre </th>
                            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                        </ng-container>

                        <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef> Fecha </th>
                            <td mat-cell *matCellDef="let element"> {{element.date.split('T')[0].replaceAll('-',
                                '/').split('/').reverse().join('/')}} </td>
                        </ng-container>

                        <ng-container matColumnDef="time">
                            <th mat-header-cell *matHeaderCellDef> Hora </th>
                            <td mat-cell *matCellDef="let element"> {{element.date.split('T')[1].split('.')[0]}} </td>
                        </ng-container>

                        <ng-container matColumnDef="checkin">
                            <th mat-header-cell *matHeaderCellDef class="last-column"> Entrada / Salida </th>
                            <td mat-cell *matCellDef="let element"> <span class="inline">{{element.checkIn ? 'Entrada' :
                                    'Salida'}} <div class="{{element.checkIn ? 'circleGreen' : 'circleRed'}}"></div>
                                </span></td>
                        </ng-container>

                        <ng-container matColumnDef="icon">
                            <th mat-header-cell *matHeaderCellDef> </th>
                            <td mat-cell *matCellDef="let element">

                            </td>
                        </ng-container>


                        <tr mat-header-row *matHeaderRowDef="displayedCheckinsColumns; sticky: true;"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedCheckinsColumns;"></tr>
                    </table>
                </div>
            </article>
        </section>
    </div>
</main>